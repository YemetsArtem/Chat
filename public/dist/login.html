<!DOCTYPE html>
<html>
  <head>
    <title>Messenger</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>
      <ul class="nav justify-content-end">
        <li class="nav-item logo">
          CHAT
        </li>
      </ul>
    </header>

    <main>
      <div class="autorization">
        <form class="login-form">
          <div class="form-group">
            <label for="exampleInputEmail1">Email address</label>
            <input
              class="form-control"
              id="exampleInputEmail1"
              type="email"
              aria-describedby="emailHelp"
              placeholder="Enter email"
              name="email"
            /><small class="form-text text-muted" id="emailHelp"
              >We'll never share your email with anyone else.</small
            >
          </div>
          <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input
              class="form-control"
              id="exampleInputPassword1"
              type="password"
              placeholder="Password"
              name="password"
            />
          </div>
          <div class="form-group form-check">
            <input
              class="form-check-input"
              id="exampleCheck1"
              type="checkbox"
              name="checkbox"
            />
            <label class="form-check-label" for="exampleCheck1"
              >Check me out</label
            >
          </div>
          <button class="btn btn-primary" type="submit">Submit</button>
        </form>
      </div>
    </main>

    <footer id="about">
      <div class="foot-wrp-left">
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
      </div>
      <div class="foot-wrp-right">
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
        <section>
          <ul>
            <li>About</li>
            <li>The NameOfOur Company</li>
            <li>Privacy Policy</li>
            <li>Terms of Use</li>
          </ul>
        </section>
      </div>
    </footer>

    <div class="scripts">
      <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"
      ></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

      <script>
        $(".login-form").submit(function() {
          axios({
            method: "post",
            url: "/login",
            data: {
              email: this.elements.email.value,
              password: this.elements.password.value,
              checkbox: this.elements.checkbox.checked
            }
          })
            .then(response => {
              const foundUser = response.data;

              if (foundUser) {
                $(location).attr("href", "/chat");
              } else {
                const p = $(`<p>User not found</p>`);
                $(p).insertAfter(".form-check");

                setTimeout(() => {
                  p.remove();
                }, 2000);
              }
            })
            .catch(error => {
              console.error(error);
            });

          this.elements.email.value = "";
          this.elements.password.value = "";
          return false;
        });
      </script>
    </div>
  </body>
</html>
